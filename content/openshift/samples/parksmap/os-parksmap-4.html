
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>4. Deploying Docker Image · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="os-parksmap-5.html" />
    
    
    <link rel="prev" href="os-parksmap-3.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    INTRODUCTION
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../../linux/">
            
                <a href="../../../linux/">
            
                    
                    LINUX
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../../linux/rhel/readme.html">
            
                <a href="../../../linux/rhel/readme.html">
            
                    
                    安装
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../../../linux/rhel/pre-install.html">
            
                <a href="../../../linux/rhel/pre-install.html">
            
                    
                    安装 DVD 制作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../../../linux/rhel/install-img-usb.html">
            
                <a href="../../../linux/rhel/install-img-usb.html">
            
                    
                    生成 USB 介质
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../../../linux/rhel/install.html">
            
                <a href="../../../linux/rhel/install.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../../../linux/rhel/kvm.html">
            
                <a href="../../../linux/rhel/kvm.html">
            
                    
                    KVM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../../linux/basic/basic.html">
            
                <a href="../../../linux/basic/basic.html">
            
                    
                    基础
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../../../linux/basic/local-remote-login.html">
            
                <a href="../../../linux/basic/local-remote-login.html">
            
                    
                    本地及远程登录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../../../linux/basic/filesystem-overview.html">
            
                <a href="../../../linux/basic/filesystem-overview.html">
            
                    
                    文件系统导视
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../../../linux/basic/user-group.html">
            
                <a href="../../../linux/basic/user-group.html">
            
                    
                    用户和组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../../../linux/basic/packages-update.html">
            
                <a href="../../../linux/basic/packages-update.html">
            
                    
                    软件包的安装与更新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../../../linux/basic/syslog.html">
            
                <a href="../../../linux/basic/syslog.html">
            
                    
                    系统日志
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="../../../linux/basic/ntp.html">
            
                <a href="../../../linux/basic/ntp.html">
            
                    
                    NTP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../../linux/networking/">
            
                <a href="../../../linux/networking/">
            
                    
                    网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../../../linux/networking/ifcfg.html">
            
                <a href="../../../linux/networking/ifcfg.html">
            
                    
                    网络配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../../../linux/networking/ipv6cfg.html">
            
                <a href="../../../linux/networking/ipv6cfg.html">
            
                    
                    IPv6 网络配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="../../../linux/networking/netns.html">
            
                <a href="../../../linux/networking/netns.html">
            
                    
                    namespace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.4" data-path="../../../linux/networking/teaming.html">
            
                <a href="../../../linux/networking/teaming.html">
            
                    
                    teaming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.5" data-path="../../../linux/networking/bridge.html">
            
                <a href="../../../linux/networking/bridge.html">
            
                    
                    bridge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.6" data-path="../../../linux/networking/dns.html">
            
                <a href="../../../linux/networking/dns.html">
            
                    
                    DNS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../../linux/stoarges/readme.html">
            
                <a href="../../../linux/stoarges/readme.html">
            
                    
                    存储
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../../../linux/stoarges/fs.html">
            
                <a href="../../../linux/stoarges/fs.html">
            
                    
                    文件系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../../../linux/stoarges/lvm.html">
            
                <a href="../../../linux/stoarges/lvm.html">
            
                    
                    LVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../../../linux/stoarges/nfs.html">
            
                <a href="../../../linux/stoarges/nfs.html">
            
                    
                    NFS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../../../linux/stoarges/file-storage.html">
            
                <a href="../../../linux/stoarges/file-storage.html">
            
                    
                    文件存储
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="../../../linux/stoarges/block-storage.html">
            
                <a href="../../../linux/stoarges/block-storage.html">
            
                    
                    块存储
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../../linux/security/">
            
                <a href="../../../linux/security/">
            
                    
                    安全
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../../../linux/security/file-permissions.html">
            
                <a href="../../../linux/security/file-permissions.html">
            
                    
                    文件权限
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../../../linux/security/SELinux.html">
            
                <a href="../../../linux/security/SELinux.html">
            
                    
                    SELinux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="../../../linux/security/selinux-contexts-permission-control.html">
            
                <a href="../../../linux/security/selinux-contexts-permission-control.html">
            
                    
                    Using SELinux Contexts to perform permission control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" data-path="../../../linux/security/selinux-boolean-home.html">
            
                <a href="../../../linux/security/selinux-boolean-home.html">
            
                    
                    Appache to access user home directories
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../../../linux/process/">
            
                <a href="../../../linux/process/">
            
                    
                    进程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1" data-path="../../../linux/process/management.html">
            
                <a href="../../../linux/process/management.html">
            
                    
                    进程管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.2" data-path="../../../linux/process/service.html">
            
                <a href="../../../linux/process/service.html">
            
                    
                    服务管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.3" data-path="../../../linux/process/schedule.html">
            
                <a href="../../../linux/process/schedule.html">
            
                    
                    周期性运行进程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.4" data-path="../../../linux/process/bash.html">
            
                <a href="../../../linux/process/bash.html">
            
                    
                    bash
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../../../linux/svc/">
            
                <a href="../../../linux/svc/">
            
                    
                    常用服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.7.1" data-path="../../../linux/svc/openssh.html">
            
                <a href="../../../linux/svc/openssh.html">
            
                    
                    OpenSSH
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.2" data-path="../../../linux/svc/postfix.html">
            
                <a href="../../../linux/svc/postfix.html">
            
                    
                    Email
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.3" data-path="../../../linux/svc/mariadb.html">
            
                <a href="../../../linux/svc/mariadb.html">
            
                    
                    MariaDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.4" data-path="../../../linux/svc/httpd.html">
            
                <a href="../../../linux/svc/httpd.html">
            
                    
                    HTTPD
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../../docker/docker.html">
            
                <a href="../../../docker/docker.html">
            
                    
                    DOCKER
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../../docker/svc/svc.html">
            
                <a href="../../../docker/svc/svc.html">
            
                    
                    容器化服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../../docker/svc/mysql.html">
            
                <a href="../../../docker/svc/mysql.html">
            
                    
                    mysql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../../docker/svc/httpd.html">
            
                <a href="../../../docker/svc/httpd.html">
            
                    
                    httpd
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../../docker/container.html">
            
                <a href="../../../docker/container.html">
            
                    
                    容器管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../../docker/images.html">
            
                <a href="../../../docker/images.html">
            
                    
                    容器镜像
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../openshift.html">
            
                <a href="../../openshift.html">
            
                    
                    OPENSHIFT
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../concepts/">
            
                <a href="../../concepts/">
            
                    
                    概念
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../install/">
            
                <a href="../../install/">
            
                    
                    安装
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../../install/yum.html">
            
                <a href="../../install/yum.html">
            
                    
                    本地 yum 源配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../../install/architecture.html">
            
                <a href="../../install/architecture.html">
            
                    
                    整体架构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../../install/static-dns-ssh.html">
            
                <a href="../../install/static-dns-ssh.html">
            
                    
                    静态域名，SSH 互信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="../../install/env-setup.html">
            
                <a href="../../install/env-setup.html">
            
                    
                    软件包安装及环境准备
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="../../install/dns-setup.adoc">
            
                <span>
            
                    
                    本地 DNS 服务器配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.6" data-path="../../install/docker-repo-setup.html">
            
                <a href="../../install/docker-repo-setup.html">
            
                    
                    公共镜像仓库配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.7" data-path="../../install/install.html">
            
                <a href="../../install/install.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.8" data-path="../../install/post-install.html">
            
                <a href="../../install/post-install.html">
            
                    
                    后续配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.9" data-path="../../install/git-setup.html">
            
                <a href="../../install/git-setup.html">
            
                    
                    gitlab 配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../samples.html">
            
                <a href="../samples.html">
            
                    
                    示例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../deploy-image-to-docker-registry.html">
            
                <a href="../deploy-image-to-docker-registry.html">
            
                    
                    deploy image to docker registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="../elastic-spark.html">
            
                <a href="../elastic-spark.html">
            
                    
                    elasticsearch and spark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="../deploy-mysql-db.html">
            
                <a href="../deploy-mysql-db.html">
            
                    
                    部署 mysql 数据库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4" data-path="../new-app-s2i.html">
            
                <a href="../new-app-s2i.html">
            
                    
                    通过 s2i 构建容器化的应用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.5" data-path="../wordpress/wp.html">
            
                <a href="../wordpress/wp.html">
            
                    
                    wordpress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.6" data-path="../cicd.html">
            
                <a href="../cicd.html">
            
                    
                    CICD Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7" data-path="os-parksmap.html">
            
                <a href="os-parksmap.html">
            
                    
                    parksmap
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.7.1" data-path="os-parksmap-1.html">
            
                <a href="os-parksmap-1.html">
            
                    
                    1. Installing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7.2" data-path="os-parksmap-2.html">
            
                <a href="os-parksmap-2.html">
            
                    
                    2. Exploring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7.3" data-path="os-parksmap-3.html">
            
                <a href="os-parksmap-3.html">
            
                    
                    3. Architecture Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.3.7.4" data-path="os-parksmap-4.html">
            
                <a href="os-parksmap-4.html">
            
                    
                    4. Deploying Docker Image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7.5" data-path="os-parksmap-5.html">
            
                <a href="os-parksmap-5.html">
            
                    
                    5. Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7.6" data-path="os-parksmap-6.html">
            
                <a href="os-parksmap-6.html">
            
                    
                    6. Creating Routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7.7" data-path="os-parksmap-7.html">
            
                <a href="os-parksmap-7.html">
            
                    
                    7. Role-Based Access Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7.8" data-path="os-parksmap-8.html">
            
                <a href="os-parksmap-8.html">
            
                    
                    8. Deploying Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7.9" data-path="os-parksmap-9.html">
            
                <a href="os-parksmap-9.html">
            
                    
                    9. Adding MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7.10" data-path="os-parksmap-10.html">
            
                <a href="os-parksmap-10.html">
            
                    
                    10. Application Health
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7.11" data-path="os-parksmap-11.html">
            
                <a href="os-parksmap-11.html">
            
                    
                    11. CI/CD
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7.12" data-path="../parksma/pos-parksmap-12.adoc">
            
                <span>
            
                    
                    12. Using Templates
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3.8" data-path="../vdb-data-svc.html">
            
                <a href="../vdb-data-svc.html">
            
                    
                    Teiid Data Service
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../devops.html">
            
                <a href="../../devops.html">
            
                    
                    DevOps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../100/">
            
                <a href="../../100/">
            
                    
                    PlaceHolder
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="../../100/001.html">
            
                <a href="../../100/001.html">
            
                    
                    Create an App from a Docker image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.2" data-path="../../100/002.html">
            
                <a href="../../100/002.html">
            
                    
                    Create an App using Docker build
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.3" data-path="../../100/003.html">
            
                <a href="../../100/003.html">
            
                    
                    Using Web Console
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.4" data-path="../../100/004.html">
            
                <a href="../../100/004.html">
            
                    
                    Create an App using JBoss EAP builder image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.5" data-path="../../100/005.html">
            
                <a href="../../100/005.html">
            
                    
                    Using Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.6" data-path="../../100/006.html">
            
                <a href="../../100/006.html">
            
                    
                    Scale up/down and Idle the app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.7" data-path="../../100/007.html">
            
                <a href="../../100/007.html">
            
                    
                    Binary Deployment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.8" data-path="../../100/008.html">
            
                <a href="../../100/008.html">
            
                    
                    Using SSL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.9" data-path="../../100/009.html">
            
                <a href="../../100/009.html">
            
                    
                    Horizontal Auto Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.10" data-path="../../100/010.html">
            
                <a href="../../100/010.html">
            
                    
                    Blue-Green Deployments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.11" data-path="../../100/011.html">
            
                <a href="../../100/011.html">
            
                    
                    SCM Web Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.12" data-path="../../100/012.html">
            
                <a href="../../100/012.html">
            
                    
                    Rollback Applications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.13" data-path="../../100/013.html">
            
                <a href="../../100/013.html">
            
                    
                    Code Promotion across Environments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.14" data-path="../../100/014.html">
            
                <a href="../../100/014.html">
            
                    
                    JBoss Developer Studio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.15" data-path="../../100/015.html">
            
                <a href="../../100/015.html">
            
                    
                    Deploy a SpringBoot Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.16" data-path="../../100/016.html">
            
                <a href="../../100/016.html">
            
                    
                    DaemonSets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.17" data-path="../../100/017.html">
            
                <a href="../../100/017.html">
            
                    
                    StatefulSets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.18" data-path="../../100/018.html">
            
                <a href="../../100/018.html">
            
                    
                    Jobs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.19" data-path="../../100/019.html">
            
                <a href="../../100/019.html">
            
                    
                    ConfigMap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.20" data-path="../../100/020.html">
            
                <a href="../../100/020.html">
            
                    
                    Secrets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.21" data-path="../../100/021.html">
            
                <a href="../../100/021.html">
            
                    
                    PersistentVolumes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.22" data-path="../../100/022.html">
            
                <a href="../../100/022.html">
            
                    
                    PersistentVolumeClaims
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.23" data-path="../../100/023.html">
            
                <a href="../../100/023.html">
            
                    
                    Migrating Applications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.24" data-path="../../100/024.html">
            
                <a href="../../100/024.html">
            
                    
                    Template Creation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.25" data-path="../../100/025.html">
            
                <a href="../../100/025.html">
            
                    
                    Deployment Strategies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.26" data-path="../../100/026.html">
            
                <a href="../../100/026.html">
            
                    
                    Port Forwarding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.27" data-path="../../100/027.html">
            
                <a href="../../100/027.html">
            
                    
                    Exposing non HTTP Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.28" data-path="../../100/028.html">
            
                <a href="../../100/028.html">
            
                    
                    Persistent Volume Access Modes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.29" data-path="../../100/029.html">
            
                <a href="../../100/029.html">
            
                    
                    Pipelines Using Jenkins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.30" data-path="../../100/030.html">
            
                <a href="../../100/030.html">
            
                    
                    Binary Input Builds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.31" data-path="../../100/031.html">
            
                <a href="../../100/031.html">
            
                    
                    Docker Builds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.32" data-path="../../100/032.html">
            
                <a href="../../100/032.html">
            
                    
                    Writing Your Own S2I builders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.33" data-path="../../100/development.html">
            
                <a href="../../100/development.html">
            
                    
                    开发
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.33.1" data-path="../../100/040.html">
            
                <a href="../../100/040.html">
            
                    
                    Git 服务器配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../../ansible/">
            
                <a href="../../../ansible/">
            
                    
                    ANSIBLE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../../jboss/readme.html">
            
                <a href="../../../jboss/readme.html">
            
                    
                    APPDEV
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../../jboss/openwhisk.html">
            
                <a href="../../../jboss/openwhisk.html">
            
                    
                    OpenWhisk
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../../jboss/rhdm/">
            
                <a href="../../../jboss/rhdm/">
            
                    
                    RHDM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../../jboss/datavirt/datavirt.html">
            
                <a href="../../../jboss/datavirt/datavirt.html">
            
                    
                    JDV
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1" data-path="../../../jboss/datavirt/software-list.html">
            
                <a href="../../../jboss/datavirt/software-list.html">
            
                    
                    软件版本号对照表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.2" data-path="../../../jboss/datavirt/changelog.html">
            
                <a href="../../../jboss/datavirt/changelog.html">
            
                    
                    修订记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.3" data-path="../../../jboss/datavirt/download.html">
            
                <a href="../../../jboss/datavirt/download.html">
            
                    
                    下载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4" data-path="../../../jboss/datavirt/install.html">
            
                <a href="../../../jboss/datavirt/install.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.5" data-path="../../../jboss/datavirt/start.html">
            
                <a href="../../../jboss/datavirt/start.html">
            
                    
                    启动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.6" data-path="../../../jboss/datavirt/deploy-vdbs.html">
            
                <a href="../../../jboss/datavirt/deploy-vdbs.html">
            
                    
                    部署测试 VDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.7" data-path="../../../jboss/datavirt/meta.html">
            
                <a href="../../../jboss/datavirt/meta.html">
            
                    
                    元数据
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../../../jboss/amq/amq.html">
            
                <a href="../../../jboss/amq/amq.html">
            
                    
                    A-MQ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.1" data-path="../../../jboss/amq/install.html">
            
                <a href="../../../jboss/amq/install.html">
            
                    
                    AMQ 6.3 安装测试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../../../jboss/fuse/">
            
                <a href="../../../jboss/fuse/">
            
                    
                    Fuse
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.1" data-path="../../../jboss/fuse/fuse-install.html">
            
                <a href="../../../jboss/fuse/fuse-install.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.2" data-path="../../../jboss/fuse/fuse-online.html">
            
                <a href="../../../jboss/fuse/fuse-online.html">
            
                    
                    Fuse Online
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.3" data-path="../../../jboss/fuse/fuse-all-in-one.html">
            
                <a href="../../../jboss/fuse/fuse-all-in-one.html">
            
                    
                    BRMS & JDV & Mariadb & REST & FTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.4" data-path="../../../jboss/fuse/camel-maximo-sap.html">
            
                <a href="../../../jboss/fuse/camel-maximo-sap.html">
            
                    
                    IBM Maximo SAP Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.5" data-path="../../../jboss/fuse/getstart.html">
            
                <a href="../../../jboss/fuse/getstart.html">
            
                    
                    FIS Get Starts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.5.1" data-path="../../../jboss/fuse/gs-fis-rest.html">
            
                <a href="../../../jboss/fuse/gs-fis-rest.html">
            
                    
                    REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.5.2" data-path="../../../jboss/fuse/gs-data-transformation.html">
            
                <a href="../../../jboss/fuse/gs-data-transformation.html">
            
                    
                    Transformation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.5.3" data-path="../../../jboss/fuse/gs-fis-soap2rest.html">
            
                <a href="../../../jboss/fuse/gs-fis-soap2rest.html">
            
                    
                    SOAP TO REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.5.4" data-path="../../../jboss/fuse/sso-3scale.html">
            
                <a href="../../../jboss/fuse/sso-3scale.html">
            
                    
                    3Scale & SSO on OpenShift
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.5.6" data-path="../../../jboss/fuse/camel-cbr.html">
            
                <a href="../../../jboss/fuse/camel-cbr.html">
            
                    
                    Camel Content-Based Router
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.7" data-path="../../../jboss/fuse/camel-eips.html">
            
                <a href="../../../jboss/fuse/camel-eips.html">
            
                    
                    Camel EIPs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.8" data-path="../../../jboss/fuse/camel-errorhandler.html">
            
                <a href="../../../jboss/fuse/camel-errorhandler.html">
            
                    
                    Dead Letter Channel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../../../jboss/bpm/bpm.html">
            
                <a href="../../../jboss/bpm/bpm.html">
            
                    
                    BPM
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.6.1" data-path="../../../jboss/bpm/install.html">
            
                <a href="../../../jboss/bpm/install.html">
            
                    
                    安装测试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../../solutions/">
            
                <a href="../../../solutions/">
            
                    
                    SOLUTIONS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../../solutions/jbds-jdv.html">
            
                <a href="../../../solutions/jbds-jdv.html">
            
                    
                    JBDS 创建虚拟数据库操作示例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../../solutions/ep-data-solution.html">
            
                <a href="../../../solutions/ep-data-solution.html">
            
                    
                    企业数据整合案例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../../../solutions/spark-gs.html">
            
                <a href="../../../solutions/spark-gs.html">
            
                    
                    Spark Get Start
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >4. Deploying Docker Image</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="deploy-a-docker-image-application-description">Deploy a Docker Image Application description</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this lab, we&#x2019;re going to deploy the web component of the ParksMap application which is also called <code>parksmap</code> and uses OpenShift service discovery mechanism to discover the backend services deployed and shows their data on the map.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/roadshow-app-architecture-parksmap-1.png" alt="Road Show App 1"></span></p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_exercise_deploying_your_first_image">Exercise: Deploying your first Image</a></li>
<li><a href="#_background_containers_and_pods">Background: Containers and Pods</a></li>
<li><a href="#_exercise_examining_the_pod">Exercise: Examining the Pod</a></li>
<li><a href="#_background_a_little_about_the_docker_daemon">Background: A Little About the Docker Daemon</a>
<ul class="sectlevel2">
<li><a href="#_background_services">Background: Services</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="_exercise_deploying_your_first_image">Exercise: Deploying your first Image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#x2019;s start by doing the simplest thing possible - get a plain old Docker-formatted image to run on OpenShift. This is incredibly simple to do. With it can be done directly from the web console.</p>
</div>
<div class="paragraph">
<p>Return to the web console:</p>
</div>
<div class="paragraph">
<p><a href="https://master.example.com" class="bare" target="_blank">https://master.example.com</a></p>
</div>
<div class="paragraph">
<p>Find your project-userXY project and click it. Next, click &quot;Add to project&quot; at the top of the screen.</p>
</div>
<div class="paragraph">
<p>There are several options, but we are only concerned with &quot;Deploy Image&quot;. Click it. We will learn more about image streams and image stream tags later. For now, select the &quot;Image Name&quot; option, and copy/paste the following into the box:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>docker.io/openshiftroadshow/parksmap:1.2.0</pre>
</div>
</div>
<div class="paragraph">
<p>Your screen will end up looking something like this:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/parksmap-image.png" alt="parksmap-image"></span></p>
</div>
<div class="paragraph">
<p>Either press <code>enter</code> or click on the magnifying glass. OpenShift will then go out to the Docker registry specified and interrogate the image. You then are presented with some options to add things like environment variables, labels, and etc.&#x2009;&#x2014;&#x2009;which we will learn about later.</p>
</div>
<div class="paragraph">
<p>For now, change the application name:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/parksmap-image-options.png" alt="parksmap-image-options"></span></p>
</div>
<div class="paragraph">
<p>Hit the blue &quot;Create&quot; button at the bottom of the screen and then click the &quot;Continue to overview&quot; link. Take a moment to look at the various messages that you now see on the overview page.</p>
</div>
<div class="paragraph">
<p>WINNING! These few steps are the only ones you need to run to get a &quot;vanilla&quot; Docker-formatted image deployed on OpenShift. This should work with any Docker-formatted image that follows best practices, such as defining an EXPOSE port, not needing to run specifically as the root user or other user name, and a single non-exiting CMD to execute on start.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_background_containers_and_pods">Background: Containers and Pods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we start digging in we need to understand how containers and <code>Pods</code> are related. Given the morning sessions where we discussed the OpenShift platform and how it uses containers and <code>Pods</code>, we will not be covering the background on these technologies in this lab. Instead, we will dive right in and start using them.</p>
</div>
<div class="paragraph">
<p>In OpenShift, the smallest deployable unit is a <code>Pod</code>. A <code>Pod</code> is a group of one or more Docker containers deployed together and guaranteed to be on the same host. From the doc:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Each pod has its own IP address, therefore owning its entire port space, and containers within pods can share storage. Pods can be &quot;tagged&quot; with one or more labels, which are then used to select and manage groups of pods in a single operation.</pre>
</div>
</div>
<div class="paragraph">
<p><code>Pods</code> can contain multiple Docker instances. The general idea is for a <code>Pod</code> to contain a &quot;server&quot; and any auxiliary services you want to run along with that server. Examples of containers you might put in a Pod are, an Apache HTTPD server, a log analyzer, and a file service to help manage uploaded files.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercise_examining_the_pod">Exercise: Examining the Pod</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the web console&#x2019;s overview page you will see that there is a single Pod that was created by your actions. This Pod contains a single container, which happens to be the parks map application - a simple Spring Boot/Java application.</p>
</div>
<div class="paragraph">
<p>You can also examine Pods from the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get pod</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see output that looks similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">NAME               READY     STATUS    RESTARTS   AGE
parksmap-1-1m1bj   1/1       Running   0          21s</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above output lists all of the Pods in the current Project, including the Pod name, state, restarts, and uptime. Once you have a Pod&#x2019;s name, you can get more information about the Pod using the oc get command. To make the output readable, I suggest changing the output type to YAML using the following syntax:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Make sure you use the correct Pod name from your output.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get pod parksmap-1-1m1bj -o yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see something like the following output (which has been truncated due to space considerations of this workshop manual):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"><span class="hljs-attr">apiVersion:</span> v1
<span class="hljs-attr">kind:</span> Pod
<span class="hljs-attr">metadata:</span>
<span class="hljs-attr">  annotations:</span>
    kubernetes.io/created-by: <span class="hljs-string">|
      {&quot;kind&quot;:&quot;SerializedReference&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;reference&quot;:{&quot;kind&quot;:&quot;ReplicationController&quot;,&quot;namespace&quot;:&quot;project-ksoong&quot;,&quot;name&quot;:&quot;parksmap-1&quot;,&quot;uid&quot;:&quot;1c2d04a5-607f-11e7-bbc1-0682973451aa&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;resourceVersion&quot;:&quot;4053485&quot;}}
    kubernetes.io/limit-ranger: &apos;LimitRanger plugin set: cpu, memory request for container
      parksmap; cpu, memory limit for container parksmap&apos;
    openshift.io/deployment-config.latest-version: &quot;1&quot;
    openshift.io/deployment-config.name: parksmap
    openshift.io/deployment.name: parksmap-1
    openshift.io/generated-by: OpenShiftWebConsole
    openshift.io/scc: restricted
</span><span class="hljs-attr">  creationTimestamp:</span> <span class="hljs-number">2017</span><span class="hljs-bullet">-07</span><span class="hljs-bullet">-04</span>T06:<span class="hljs-number">07</span>:<span class="hljs-number">53</span>Z
<span class="hljs-attr">  generateName:</span> parksmap<span class="hljs-bullet">-1</span>-
<span class="hljs-attr">  labels:</span>
<span class="hljs-attr">    app:</span> parksmap
<span class="hljs-attr">    deployment:</span> parksmap<span class="hljs-bullet">-1</span>
<span class="hljs-attr">    deploymentconfig:</span> parksmap
<span class="hljs-attr">  name:</span> parksmap<span class="hljs-bullet">-1</span><span class="hljs-bullet">-1</span>m1bj
<span class="hljs-attr">  namespace:</span> project-ksoong
<span class="hljs-attr">  resourceVersion:</span> <span class="hljs-string">&quot;4053517&quot;</span>
<span class="hljs-attr">  selfLink:</span> /api/v1/namespaces/project-ksoong/pods/parksmap<span class="hljs-bullet">-1</span><span class="hljs-bullet">-1</span>m1bj
<span class="hljs-attr">  uid:</span> <span class="hljs-number">1</span>df132f9<span class="hljs-bullet">-607</span>f<span class="hljs-bullet">-11e7</span>-bbc1<span class="hljs-bullet">-0682973451</span>aa
<span class="hljs-attr">spec:</span>
<span class="hljs-attr">  containers:</span>
<span class="hljs-attr">  - image:</span> docker.io/openshiftroadshow/parksmap@sha256:d6d321390e0c8db598b23bab6d65b126bf3d1e61a9de6515e3389951996c0369
<span class="hljs-attr">    imagePullPolicy:</span> IfNotPresent
<span class="hljs-attr">    name:</span> parksmap
<span class="hljs-attr">    ports:</span>
<span class="hljs-attr">    - containerPort:</span> <span class="hljs-number">8080</span>
<span class="hljs-attr">      protocol:</span> TCP
<span class="hljs-attr">    resources:</span>
<span class="hljs-attr">      limits:</span>
<span class="hljs-attr">        cpu:</span> <span class="hljs-number">500</span>m
<span class="hljs-attr">        memory:</span> <span class="hljs-number">2</span>Gi
<span class="hljs-attr">      requests:</span>
<span class="hljs-attr">        cpu:</span> <span class="hljs-number">50</span>m
<span class="hljs-attr">        memory:</span> <span class="hljs-number">256</span>Mi
<span class="hljs-attr">    securityContext:</span>
<span class="hljs-attr">      capabilities:</span>
<span class="hljs-attr">        drop:</span>
<span class="hljs-bullet">        -</span> KILL
<span class="hljs-bullet">        -</span> MKNOD
<span class="hljs-bullet">        -</span> SETGID
<span class="hljs-bullet">        -</span> SETUID
<span class="hljs-bullet">        -</span> SYS_CHROOT
<span class="hljs-attr">      privileged:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">      runAsUser:</span> <span class="hljs-number">1001440000</span>
<span class="hljs-attr">      seLinuxOptions:</span>
<span class="hljs-attr">        level:</span> s0:c38,c17
<span class="hljs-attr">    terminationMessagePath:</span> /dev/termination-log
<span class="hljs-attr">    volumeMounts:</span>
<span class="hljs-attr">    - mountPath:</span> /var/run/secrets/kubernetes.io/serviceaccount
<span class="hljs-attr">      name:</span> default-token-bpp6f
<span class="hljs-attr">      readOnly:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">  dnsPolicy:</span> ClusterFirst
<span class="hljs-attr">  imagePullSecrets:</span>
<span class="hljs-attr">  - name:</span> default-dockercfg<span class="hljs-bullet">-7</span>qgr6
<span class="hljs-attr">  nodeName:</span> node2.na1.internal
<span class="hljs-attr">  nodeSelector:</span>
<span class="hljs-attr">    env:</span> users
<span class="hljs-attr">  restartPolicy:</span> Always
<span class="hljs-attr">  securityContext:</span>
<span class="hljs-attr">    fsGroup:</span> <span class="hljs-number">1001440000</span>
<span class="hljs-attr">    seLinuxOptions:</span>
<span class="hljs-attr">      level:</span> s0:c38,c17
<span class="hljs-attr">  serviceAccount:</span> default
<span class="hljs-attr">  serviceAccountName:</span> default
<span class="hljs-attr">  terminationGracePeriodSeconds:</span> <span class="hljs-number">30</span>
<span class="hljs-attr">  volumes:</span>
<span class="hljs-attr">  - name:</span> default-token-bpp6f
<span class="hljs-attr">    secret:</span>
<span class="hljs-attr">      defaultMode:</span> <span class="hljs-number">420</span>
<span class="hljs-attr">      secretName:</span> default-token-bpp6f
<span class="hljs-attr">status:</span>
<span class="hljs-attr">  conditions:</span>
<span class="hljs-attr">  - lastProbeTime:</span> <span class="hljs-literal">null</span>
<span class="hljs-attr">    lastTransitionTime:</span> <span class="hljs-number">2017</span><span class="hljs-bullet">-07</span><span class="hljs-bullet">-04</span>T06:<span class="hljs-number">07</span>:<span class="hljs-number">53</span>Z
<span class="hljs-attr">    status:</span> <span class="hljs-string">&quot;True&quot;</span>
<span class="hljs-attr">    type:</span> Initialized
<span class="hljs-attr">  - lastProbeTime:</span> <span class="hljs-literal">null</span>
<span class="hljs-attr">    lastTransitionTime:</span> <span class="hljs-number">2017</span><span class="hljs-bullet">-07</span><span class="hljs-bullet">-04</span>T06:<span class="hljs-number">08</span>:<span class="hljs-number">07</span>Z
<span class="hljs-attr">    status:</span> <span class="hljs-string">&quot;True&quot;</span>
<span class="hljs-attr">    type:</span> Ready
<span class="hljs-attr">  - lastProbeTime:</span> <span class="hljs-literal">null</span>
<span class="hljs-attr">    lastTransitionTime:</span> <span class="hljs-number">2017</span><span class="hljs-bullet">-07</span><span class="hljs-bullet">-04</span>T06:<span class="hljs-number">07</span>:<span class="hljs-number">53</span>Z
<span class="hljs-attr">    status:</span> <span class="hljs-string">&quot;True&quot;</span>
<span class="hljs-attr">    type:</span> PodScheduled
<span class="hljs-attr">  containerStatuses:</span>
<span class="hljs-attr">  - containerID:</span> docker://<span class="hljs-number">6</span>b76986902e73454e499e750a881b003166e1b096928037c0a94f0cb7fed7f1f
<span class="hljs-attr">    image:</span> docker.io/openshiftroadshow/parksmap@sha256:d6d321390e0c8db598b23bab6d65b126bf3d1e61a9de6515e3389951996c0369
<span class="hljs-attr">    imageID:</span> docker-pullable://docker.io/openshiftroadshow/parksmap@sha256:d6d321390e0c8db598b23bab6d65b126bf3d1e61a9de6515e3389951996c0369
<span class="hljs-attr">    lastState:</span> {}
<span class="hljs-attr">    name:</span> parksmap
<span class="hljs-attr">    ready:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">    restartCount:</span> <span class="hljs-number">0</span>
<span class="hljs-attr">    state:</span>
<span class="hljs-attr">      running:</span>
<span class="hljs-attr">        startedAt:</span> <span class="hljs-number">2017</span><span class="hljs-bullet">-07</span><span class="hljs-bullet">-04</span>T06:<span class="hljs-number">08</span>:<span class="hljs-number">07</span>Z
<span class="hljs-attr">  hostIP:</span> <span class="hljs-number">192.199</span><span class="hljs-number">.0</span><span class="hljs-number">.125</span>
<span class="hljs-attr">  phase:</span> Running
<span class="hljs-attr">  podIP:</span> <span class="hljs-number">10.1</span><span class="hljs-number">.3</span><span class="hljs-number">.191</span>
<span class="hljs-attr">  startTime:</span> <span class="hljs-number">2017</span><span class="hljs-bullet">-07</span><span class="hljs-bullet">-04</span>T06:<span class="hljs-number">07</span>:<span class="hljs-number">53</span>Z</code></pre>
</div>
</div>
<div class="paragraph">
<p>The web interface also shows a lot of the same information on the Pod details page. If you click in the Pod circle, and then click the Pod name, you will find the details page. You can also get there by clicking &quot;Applications&quot;, then &quot;Pods&quot;, at the left, and then clicking the Pod name.</p>
</div>
<div class="paragraph">
<p>Getting the parks map image running may take a little while to complete. Each OpenShift node that is asked to run the image has to pull (download) it if the node does not already have it cached locally. You can check on the status of the image download and deployment in the Pod details page, or from the command line with the oc get pods command that you used before.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_background_a_little_about_the_docker_daemon">Background: A Little About the Docker Daemon</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Whenever OpenShift asks the node&#x2019;s Docker daemon to run an image, the Docker daemon will check to make sure it has the right &quot;version&quot; of the image to run. If it doesn&#x2019;t, it will pull it from the specified registry.</p>
</div>
<div class="sect2">
<h3 id="_background_services">Background: Services</h3>
<div class="paragraph">
<p><code>Services</code> provide a convenient abstraction layer inside OpenShift to find a group of like <code>Pods</code>. They also act as an internal proxy/load balancer between those <code>Pods</code> and anything else that needs to access them from inside the OpenShift environment. For example, if you needed more parks map servers to handle the load, you could spin up more <code>Pods</code>. OpenShift automatically maps them as endpoints to the Service, and the incoming requests would not notice anything different except that the <code>Service</code> was now doing a better job handling the requests.</p>
</div>
<div class="paragraph">
<p>When you asked OpenShift to run the image, it automatically created a <code>Service</code> for you. Remember that services are an internal construct. They are not available to the &quot;outside world&quot;, or anything that is outside the OpenShift environment. That&#x2019;s OK, as you will learn later.</p>
</div>
<div class="paragraph">
<p>The way that a <code>Service</code> maps to a set of <code>Pods</code> is via a system of <code>Labels</code> and <code>Selectors</code>. <code>Services</code> are assigned an eternal IP address and many ports and protocols can be mapped.</p>
</div>
<div class="paragraph">
<p>Now that we understand the basics of what a <code>Service</code> is, let&#x2019;s take a look at the <code>Service</code> that was created for the image that we just deployed. In order to view the <code>Services</code> defined in your <code>Project</code>, enter in the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get services</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">NAME       CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE
parksmap   172.30.32.109   &lt;none&gt;        8080/TCP   10m</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above output, we can see that we have a <code>Service</code> named <strong>parksmap</strong> with an IP/Port combination of 172.30.32.109/8080TCP. Your IP address may be different, as each <code>Service</code> receives a unique IP address upon creation. <code>Service</code> IPs are eternal and never change for the life of the <code>Service</code>.</p>
</div>
<div class="paragraph">
<p>In the web console, service information is available by clicking &quot;Applications&quot; and then clicking &quot;Services&quot; in the &quot;Networking&quot; submenu.</p>
</div>
<div class="paragraph">
<p>You can also get more detailed information about a <code>Service</code> by using the following command to display the data in YAML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc get service parksmap -o yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"><span class="hljs-attr">apiVersion:</span> v1
<span class="hljs-attr">kind:</span> Service
<span class="hljs-attr">metadata:</span>
<span class="hljs-attr">  annotations:</span>
    openshift.io/generated-by: OpenShiftWebConsole
<span class="hljs-attr">  creationTimestamp:</span> <span class="hljs-number">2017</span><span class="hljs-bullet">-07</span><span class="hljs-bullet">-04</span>T06:<span class="hljs-number">07</span>:<span class="hljs-number">50</span>Z
<span class="hljs-attr">  labels:</span>
<span class="hljs-attr">    app:</span> parksmap
<span class="hljs-attr">  name:</span> parksmap
<span class="hljs-attr">  namespace:</span> project-ksoong
<span class="hljs-attr">  resourceVersion:</span> <span class="hljs-string">&quot;4053462&quot;</span>
<span class="hljs-attr">  selfLink:</span> /api/v1/namespaces/project-ksoong/services/parksmap
<span class="hljs-attr">  uid:</span> <span class="hljs-number">1</span>bcd1db8<span class="hljs-bullet">-607</span>f<span class="hljs-bullet">-11e7</span>-bbc1<span class="hljs-bullet">-0682973451</span>aa
<span class="hljs-attr">spec:</span>
<span class="hljs-attr">  clusterIP:</span> <span class="hljs-number">172.30</span><span class="hljs-number">.32</span><span class="hljs-number">.109</span>
<span class="hljs-attr">  ports:</span>
<span class="hljs-attr">  - name:</span> <span class="hljs-number">8080</span>-tcp
<span class="hljs-attr">    port:</span> <span class="hljs-number">8080</span>
<span class="hljs-attr">    protocol:</span> TCP
<span class="hljs-attr">    targetPort:</span> <span class="hljs-number">8080</span>
<span class="hljs-attr">  selector:</span>
<span class="hljs-attr">    deploymentconfig:</span> parksmap
<span class="hljs-attr">  sessionAffinity:</span> None
<span class="hljs-attr">  type:</span> ClusterIP
<span class="hljs-attr">status:</span>
<span class="hljs-attr">  loadBalancer:</span> {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Take note of the selector stanza. Remember it.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Service</code> has selector stanza that refers to <strong>deploymentconfig=parksmap</strong>.</p>
</li>
<li>
<p>The Pod has multiple Labels:</p>
<div class="ulist">
<ul>
<li>
<p>deploymentconfig=parksmap</p>
</li>
<li>
<p>app=parksmap</p>
</li>
<li>
<p>deployment=parksmap-1</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>Labels</code> are just key/value pairs. Any <code>Pod</code> in this Project that has a <code>Label</code> that matches the <code>Selector</code> will be associated with the <code>Service</code>. To see this in action, issue the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc describe service parksmap</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see something like the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name:			parksmap
Namespace:		project-ksoong
Labels:			app=parksmap
Selector:		deploymentconfig=parksmap
Type:			ClusterIP
IP:			172.30.32.109
Port:			8080-tcp	8080/TCP
Endpoints:		10.1.3.191:8080
Session Affinity:	None
No events.</pre>
</div>
</div>
<div class="paragraph">
<p>You may be wondering why only one end point is listed. That is because there is only one <code>Pod</code> currently running. In the next lab, we will learn how to scale an application, at which point you will be able to see multiple endpoints associated with the <code>Service</code>.</p>
</div>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="os-parksmap-3.html" class="navigation navigation-prev " aria-label="Previous page: 3. Architecture Overview">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="os-parksmap-5.html" class="navigation navigation-next " aria-label="Next page: 5. Scaling">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"4. Deploying Docker Image","level":"1.4.3.7.4","depth":4,"next":{"title":"5. Scaling","level":"1.4.3.7.5","depth":4,"path":"openshift/samples/parksmap/os-parksmap-5.adoc","ref":"openshift/samples/parksmap/os-parksmap-5.adoc","articles":[]},"previous":{"title":"3. Architecture Overview","level":"1.4.3.7.3","depth":4,"path":"openshift/samples/parksmap/os-parksmap-3.adoc","ref":"openshift/samples/parksmap/os-parksmap-3.adoc","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{"copyrightYear":"2018","copyrightHolder":"Kylin Soong"},"plugins":["collapsible-menu","donate","-sharing","sharing-plus","splitter","back-to-top-button","edit-link"],"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy Kylin Soong 2018","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"collapsible-menu":{},"splitter":{},"search":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"donate":{"alipay":"http://ksoong.org/docs/content/images/alipay.png","alipayText":"支付宝捐赠","button":"赞赏","title":"","wechat":"http://ksoong.org/docs/content/images/wechat.png","wechatText":"微信捐赠"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"back-to-top-button":{},"sharing":{"weibo":true,"linkedin":true,"google":true,"facebook":true,"all":["facebook","google","linkedin","weibo"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/kylinsoong/docs/blob/gh-pages"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css"}},"file":{"path":"openshift/samples/parksmap/os-parksmap-4.adoc","mtime":"2018-06-01T01:29:20.176Z","type":"asciidoc"},"gitbook":{"version":"3.2.3","time":"2018-06-06T12:17:47.864Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

