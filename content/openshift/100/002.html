
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Create an App using Docker build · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="003.html" />
    
    
    <link rel="prev" href="001.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    INTRODUCTION
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../linux/">
            
                <a href="../../linux/">
            
                    
                    LINUX
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../linux/rhel/readme.html">
            
                <a href="../../linux/rhel/readme.html">
            
                    
                    安装
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../../linux/rhel/pre-install.html">
            
                <a href="../../linux/rhel/pre-install.html">
            
                    
                    安装 DVD 制作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../../linux/rhel/install-img-usb.html">
            
                <a href="../../linux/rhel/install-img-usb.html">
            
                    
                    生成 USB 介质
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../../linux/rhel/install.html">
            
                <a href="../../linux/rhel/install.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../../linux/rhel/kvm.html">
            
                <a href="../../linux/rhel/kvm.html">
            
                    
                    KVM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../linux/basic/basic.html">
            
                <a href="../../linux/basic/basic.html">
            
                    
                    基础
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../../linux/basic/local-remote-login.html">
            
                <a href="../../linux/basic/local-remote-login.html">
            
                    
                    本地及远程登录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../../linux/basic/filesystem-overview.html">
            
                <a href="../../linux/basic/filesystem-overview.html">
            
                    
                    文件系统导视
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../../linux/basic/user-group.html">
            
                <a href="../../linux/basic/user-group.html">
            
                    
                    用户和组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../../linux/basic/packages-update.html">
            
                <a href="../../linux/basic/packages-update.html">
            
                    
                    软件包的安装与更新
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../../linux/basic/syslog.html">
            
                <a href="../../linux/basic/syslog.html">
            
                    
                    系统日志
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="../../linux/basic/ntp.html">
            
                <a href="../../linux/basic/ntp.html">
            
                    
                    NTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.7" data-path="../../linux/basic/ex.html">
            
                <a href="../../linux/basic/ex.html">
            
                    
                    QA
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../linux/networking/">
            
                <a href="../../linux/networking/">
            
                    
                    网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../../linux/networking/ifcfg.html">
            
                <a href="../../linux/networking/ifcfg.html">
            
                    
                    网络配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../../linux/networking/ipv6cfg.html">
            
                <a href="../../linux/networking/ipv6cfg.html">
            
                    
                    IPv6 网络配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="../../linux/networking/netns.html">
            
                <a href="../../linux/networking/netns.html">
            
                    
                    namespace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.4" data-path="../../linux/networking/teaming.html">
            
                <a href="../../linux/networking/teaming.html">
            
                    
                    teaming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.5" data-path="../../linux/networking/bridge.html">
            
                <a href="../../linux/networking/bridge.html">
            
                    
                    bridge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.6" data-path="../../linux/networking/dns.html">
            
                <a href="../../linux/networking/dns.html">
            
                    
                    DNS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.7" data-path="../../linux/networking/tcp.html">
            
                <a href="../../linux/networking/tcp.html">
            
                    
                    TCP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../linux/stoarges/readme.html">
            
                <a href="../../linux/stoarges/readme.html">
            
                    
                    存储
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../../linux/stoarges/fs.html">
            
                <a href="../../linux/stoarges/fs.html">
            
                    
                    文件系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../../linux/stoarges/lvm.html">
            
                <a href="../../linux/stoarges/lvm.html">
            
                    
                    LVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../../linux/stoarges/nfs.html">
            
                <a href="../../linux/stoarges/nfs.html">
            
                    
                    NFS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../../linux/stoarges/file-storage.html">
            
                <a href="../../linux/stoarges/file-storage.html">
            
                    
                    文件存储
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="../../linux/stoarges/block-storage.html">
            
                <a href="../../linux/stoarges/block-storage.html">
            
                    
                    块存储
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../linux/security/">
            
                <a href="../../linux/security/">
            
                    
                    安全
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../../linux/security/file-permissions.html">
            
                <a href="../../linux/security/file-permissions.html">
            
                    
                    文件权限
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../../linux/security/SELinux.html">
            
                <a href="../../linux/security/SELinux.html">
            
                    
                    SELinux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="../../linux/security/firewall.html">
            
                <a href="../../linux/security/firewall.html">
            
                    
                    防火墙
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" data-path="../../linux/security/net-port.html">
            
                <a href="../../linux/security/net-port.html">
            
                    
                    网络端口安全
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../../linux/process/">
            
                <a href="../../linux/process/">
            
                    
                    进程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1" data-path="../../linux/process/management.html">
            
                <a href="../../linux/process/management.html">
            
                    
                    进程管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.2" data-path="../../linux/process/service.html">
            
                <a href="../../linux/process/service.html">
            
                    
                    服务管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.3" data-path="../../linux/process/schedule.html">
            
                <a href="../../linux/process/schedule.html">
            
                    
                    周期性运行进程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.4" data-path="../../linux/process/bash.html">
            
                <a href="../../linux/process/bash.html">
            
                    
                    bash
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../../linux/svc/">
            
                <a href="../../linux/svc/">
            
                    
                    常用服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.7.1" data-path="../../linux/svc/openssh.html">
            
                <a href="../../linux/svc/openssh.html">
            
                    
                    OpenSSH
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.2" data-path="../../linux/svc/postfix.html">
            
                <a href="../../linux/svc/postfix.html">
            
                    
                    Email
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.3" data-path="../../linux/svc/mariadb.html">
            
                <a href="../../linux/svc/mariadb.html">
            
                    
                    MariaDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.4" data-path="../../linux/svc/httpd.html">
            
                <a href="../../linux/svc/httpd.html">
            
                    
                    HTTPD
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../docker/docker.html">
            
                <a href="../../docker/docker.html">
            
                    
                    DOCKER
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../docker/svc/svc.html">
            
                <a href="../../docker/svc/svc.html">
            
                    
                    容器化服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../docker/svc/mysql.html">
            
                <a href="../../docker/svc/mysql.html">
            
                    
                    mysql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../docker/svc/httpd.html">
            
                <a href="../../docker/svc/httpd.html">
            
                    
                    httpd
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../docker/container.html">
            
                <a href="../../docker/container.html">
            
                    
                    容器管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../docker/images.html">
            
                <a href="../../docker/images.html">
            
                    
                    容器镜像
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../openshift.html">
            
                <a href="../openshift.html">
            
                    
                    OPENSHIFT
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../concepts/">
            
                <a href="../concepts/">
            
                    
                    概念
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../install/">
            
                <a href="../install/">
            
                    
                    安装
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../install/yum.html">
            
                <a href="../install/yum.html">
            
                    
                    本地 yum 源配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../install/docker-dist.html">
            
                <a href="../install/docker-dist.html">
            
                    
                    本地 docker 镜像仓库配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../install/pre-install.html">
            
                <a href="../install/pre-install.html">
            
                    
                    前续安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="../install/install.html">
            
                <a href="../install/install.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="../install/post-install.html">
            
                <a href="../install/post-install.html">
            
                    
                    后续安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.6" data-path="../install/qa.html">
            
                <a href="../install/qa.html">
            
                    
                    常见问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../samples/samples.html">
            
                <a href="../samples/samples.html">
            
                    
                    示例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../samples/rc.html">
            
                <a href="../samples/rc.html">
            
                    
                    RC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="../samples/dc.html">
            
                <a href="../samples/dc.html">
            
                    
                    DC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="../samples/s2i.html">
            
                <a href="../samples/s2i.html">
            
                    
                    S2I
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4" data-path="../samples/deploy-mysql-db.html">
            
                <a href="../samples/deploy-mysql-db.html">
            
                    
                    部署 mysql 数据库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.5" data-path="../samples/deploy-image-to-docker-registry.html">
            
                <a href="../samples/deploy-image-to-docker-registry.html">
            
                    
                    deploy image to docker registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.6" data-path="../samples/elastic-spark.html">
            
                <a href="../samples/elastic-spark.html">
            
                    
                    elasticsearch and spark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.7" data-path="../samples/wordpress/wp.html">
            
                <a href="../samples/wordpress/wp.html">
            
                    
                    wordpress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.8" data-path="../samples/cicd.html">
            
                <a href="../samples/cicd.html">
            
                    
                    CICD Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9" data-path="../samples/parksmap/os-parksmap.html">
            
                <a href="../samples/parksmap/os-parksmap.html">
            
                    
                    parksmap
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.9.1" data-path="../samples/parksmap/os-parksmap-1.html">
            
                <a href="../samples/parksmap/os-parksmap-1.html">
            
                    
                    1. Installing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.2" data-path="../samples/parksmap/os-parksmap-2.html">
            
                <a href="../samples/parksmap/os-parksmap-2.html">
            
                    
                    2. Exploring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.3" data-path="../samples/parksmap/os-parksmap-3.html">
            
                <a href="../samples/parksmap/os-parksmap-3.html">
            
                    
                    3. Architecture Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.4" data-path="../samples/parksmap/os-parksmap-4.html">
            
                <a href="../samples/parksmap/os-parksmap-4.html">
            
                    
                    4. Deploying Docker Image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.5" data-path="../samples/parksmap/os-parksmap-5.html">
            
                <a href="../samples/parksmap/os-parksmap-5.html">
            
                    
                    5. Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.6" data-path="../samples/parksmap/os-parksmap-6.html">
            
                <a href="../samples/parksmap/os-parksmap-6.html">
            
                    
                    6. Creating Routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.7" data-path="../samples/parksmap/os-parksmap-7.html">
            
                <a href="../samples/parksmap/os-parksmap-7.html">
            
                    
                    7. Role-Based Access Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.8" data-path="../samples/parksmap/os-parksmap-8.html">
            
                <a href="../samples/parksmap/os-parksmap-8.html">
            
                    
                    8. Deploying Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.9" data-path="../samples/parksmap/os-parksmap-9.html">
            
                <a href="../samples/parksmap/os-parksmap-9.html">
            
                    
                    9. Adding MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.10" data-path="../samples/parksmap/os-parksmap-10.html">
            
                <a href="../samples/parksmap/os-parksmap-10.html">
            
                    
                    10. Application Health
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.11" data-path="../samples/parksmap/os-parksmap-11.html">
            
                <a href="../samples/parksmap/os-parksmap-11.html">
            
                    
                    11. CI/CD
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.9.12" data-path="../samples/parksmap/os-parksmap-12.html">
            
                <a href="../samples/parksmap/os-parksmap-12.html">
            
                    
                    12. Using Templates
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3.10" data-path="../samples/vdb-data-svc.html">
            
                <a href="../samples/vdb-data-svc.html">
            
                    
                    Teiid Data Service
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../devops.html">
            
                <a href="../devops.html">
            
                    
                    DevOps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="./">
            
                <a href="./">
            
                    
                    PlaceHolder
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="001.html">
            
                <a href="001.html">
            
                    
                    Create an App from a Docker image
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.5.2" data-path="002.html">
            
                <a href="002.html">
            
                    
                    Create an App using Docker build
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.3" data-path="003.html">
            
                <a href="003.html">
            
                    
                    Using Web Console
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.4" data-path="004.html">
            
                <a href="004.html">
            
                    
                    Create an App using JBoss EAP builder image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.5" data-path="005.html">
            
                <a href="005.html">
            
                    
                    Using Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.6" data-path="006.html">
            
                <a href="006.html">
            
                    
                    Scale up/down and Idle the app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.7" data-path="007.html">
            
                <a href="007.html">
            
                    
                    Binary Deployment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.8" data-path="008.html">
            
                <a href="008.html">
            
                    
                    Using SSL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.9" data-path="009.html">
            
                <a href="009.html">
            
                    
                    Horizontal Auto Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.10" data-path="010.html">
            
                <a href="010.html">
            
                    
                    Blue-Green Deployments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.11" data-path="011.html">
            
                <a href="011.html">
            
                    
                    SCM Web Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.12" data-path="012.html">
            
                <a href="012.html">
            
                    
                    Rollback Applications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.13" data-path="013.html">
            
                <a href="013.html">
            
                    
                    Code Promotion across Environments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.14" data-path="014.html">
            
                <a href="014.html">
            
                    
                    JBoss Developer Studio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.15" data-path="015.html">
            
                <a href="015.html">
            
                    
                    Deploy a SpringBoot Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.16" data-path="016.html">
            
                <a href="016.html">
            
                    
                    DaemonSets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.17" data-path="017.html">
            
                <a href="017.html">
            
                    
                    StatefulSets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.18" data-path="018.html">
            
                <a href="018.html">
            
                    
                    Jobs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.19" data-path="019.html">
            
                <a href="019.html">
            
                    
                    ConfigMap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.20" data-path="020.html">
            
                <a href="020.html">
            
                    
                    Secrets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.21" data-path="021.html">
            
                <a href="021.html">
            
                    
                    PersistentVolumes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.22" data-path="022.html">
            
                <a href="022.html">
            
                    
                    PersistentVolumeClaims
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.23" data-path="023.html">
            
                <a href="023.html">
            
                    
                    Migrating Applications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.24" data-path="024.html">
            
                <a href="024.html">
            
                    
                    Template Creation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.25" data-path="025.html">
            
                <a href="025.html">
            
                    
                    Deployment Strategies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.26" data-path="026.html">
            
                <a href="026.html">
            
                    
                    Port Forwarding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.27" data-path="027.html">
            
                <a href="027.html">
            
                    
                    Exposing non HTTP Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.28" data-path="028.html">
            
                <a href="028.html">
            
                    
                    Persistent Volume Access Modes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.29" data-path="029.html">
            
                <a href="029.html">
            
                    
                    Pipelines Using Jenkins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.30" data-path="030.html">
            
                <a href="030.html">
            
                    
                    Binary Input Builds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.31" data-path="031.html">
            
                <a href="031.html">
            
                    
                    Docker Builds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.32" data-path="032.html">
            
                <a href="032.html">
            
                    
                    Writing Your Own S2I builders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.33" data-path="development.html">
            
                <a href="development.html">
            
                    
                    开发
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.33.1" data-path="040.html">
            
                <a href="040.html">
            
                    
                    Git 服务器配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../ansible/">
            
                <a href="../../ansible/">
            
                    
                    ANSIBLE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../jboss/readme.html">
            
                <a href="../../jboss/readme.html">
            
                    
                    APPDEV
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../jboss/api/readme.html">
            
                <a href="../../jboss/api/readme.html">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../jboss/faas/openwhisk.html">
            
                <a href="../../jboss/faas/openwhisk.html">
            
                    
                    Serverless
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../jboss/rhdm/">
            
                <a href="../../jboss/rhdm/">
            
                    
                    RHDM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../../jboss/datavirt/datavirt.html">
            
                <a href="../../jboss/datavirt/datavirt.html">
            
                    
                    JDV
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.1" data-path="../../jboss/datavirt/software-list.html">
            
                <a href="../../jboss/datavirt/software-list.html">
            
                    
                    软件版本号对照表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.2" data-path="../../jboss/datavirt/changelog.html">
            
                <a href="../../jboss/datavirt/changelog.html">
            
                    
                    修订记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.3" data-path="../../jboss/datavirt/download.html">
            
                <a href="../../jboss/datavirt/download.html">
            
                    
                    下载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.4" data-path="../../jboss/datavirt/install.html">
            
                <a href="../../jboss/datavirt/install.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.5" data-path="../../jboss/datavirt/start.html">
            
                <a href="../../jboss/datavirt/start.html">
            
                    
                    启动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.6" data-path="../../jboss/datavirt/deploy-vdbs.html">
            
                <a href="../../jboss/datavirt/deploy-vdbs.html">
            
                    
                    部署测试 VDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.7" data-path="../../jboss/datavirt/meta.html">
            
                <a href="../../jboss/datavirt/meta.html">
            
                    
                    元数据
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../../jboss/amq/amq.html">
            
                <a href="../../jboss/amq/amq.html">
            
                    
                    A-MQ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.1" data-path="../../jboss/amq/install.html">
            
                <a href="../../jboss/amq/install.html">
            
                    
                    AMQ 6.3 安装测试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../../jboss/fuse/">
            
                <a href="../../jboss/fuse/">
            
                    
                    Fuse
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.6.1" data-path="../../jboss/fuse/fuse-install.html">
            
                <a href="../../jboss/fuse/fuse-install.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.2" data-path="../../jboss/fuse/fuse-online.html">
            
                <a href="../../jboss/fuse/fuse-online.html">
            
                    
                    Fuse Online
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.3" data-path="../../jboss/fuse/fuse-all-in-one.html">
            
                <a href="../../jboss/fuse/fuse-all-in-one.html">
            
                    
                    BRMS & JDV & Mariadb & REST & FTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.4" data-path="../../jboss/fuse/camel-maximo-sap.html">
            
                <a href="../../jboss/fuse/camel-maximo-sap.html">
            
                    
                    IBM Maximo SAP Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.5" data-path="../../jboss/fuse/getstart.html">
            
                <a href="../../jboss/fuse/getstart.html">
            
                    
                    FIS Get Starts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.6.5.1" data-path="../../jboss/fuse/gs-fis-rest.html">
            
                <a href="../../jboss/fuse/gs-fis-rest.html">
            
                    
                    REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.5.2" data-path="../../jboss/fuse/gs-data-transformation.html">
            
                <a href="../../jboss/fuse/gs-data-transformation.html">
            
                    
                    Transformation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.5.3" data-path="../../jboss/fuse/gs-fis-soap2rest.html">
            
                <a href="../../jboss/fuse/gs-fis-soap2rest.html">
            
                    
                    SOAP TO REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.5.4" data-path="../../jboss/fuse/sso-3scale.html">
            
                <a href="../../jboss/fuse/sso-3scale.html">
            
                    
                    3Scale & SSO on OpenShift
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.6.6" data-path="../../jboss/fuse/camel-cbr.html">
            
                <a href="../../jboss/fuse/camel-cbr.html">
            
                    
                    Camel Content-Based Router
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.7" data-path="../../jboss/fuse/camel-eips.html">
            
                <a href="../../jboss/fuse/camel-eips.html">
            
                    
                    Camel EIPs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6.8" data-path="../../jboss/fuse/camel-errorhandler.html">
            
                <a href="../../jboss/fuse/camel-errorhandler.html">
            
                    
                    Dead Letter Channel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../../jboss/bpm/bpm.html">
            
                <a href="../../jboss/bpm/bpm.html">
            
                    
                    BPM
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.7.1" data-path="../../jboss/bpm/install.html">
            
                <a href="../../jboss/bpm/install.html">
            
                    
                    安装测试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../../jboss/secure/">
            
                <a href="../../jboss/secure/">
            
                    
                    安全
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../solutions/">
            
                <a href="../../solutions/">
            
                    
                    SOLUTIONS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../solutions/jbds-jdv.html">
            
                <a href="../../solutions/jbds-jdv.html">
            
                    
                    JBDS 创建虚拟数据库操作示例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../solutions/ep-data-solution.html">
            
                <a href="../../solutions/ep-data-solution.html">
            
                    
                    企业数据整合案例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../../solutions/spark-gs.html">
            
                <a href="../../solutions/spark-gs.html">
            
                    
                    Spark Get Start
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Create an App using Docker build</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="create-an-app-using-docker-build">Create an App using Docker build</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this recipe you will learn how to create an application from a Dockerfile. OpenShift takes Dockerfile as an input and generates your application docker image for you.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_create_a_project_or_use_an_existing_project">Create a project or use an existing project</a></li>
<li><a href="#_create_an_application_that_uses_docker_file">Create an application that uses docker file</a></li>
<li><a href="#_build">Build</a></li>
<li><a href="#_deployment">Deployment</a></li>
<li><a href="#_adding_route">Adding route</a></li>
<li><a href="#_run_the_application">Run the application</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_project_or_use_an_existing_project">Create a project or use an existing project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to, you can create a new project based on what you have learned in the previous lab. Since we already have a project we will use it. Run the following command to make sure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ oc project ocp-test</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_an_application_that_uses_docker_file">Create an application that uses docker file</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This time we will use a project that has a Dockerfile in a source code repository. We will use a simple project on github (<a href="https://github.com/jbosschina/time" class="bare" target="_blank">https://github.com/jbosschina/time</a>). &quot;rhel&quot; folder from this github project is built starting with rhel7 as the base image which is described in Dockerfile.</p>
</div>
<div class="paragraph">
<p>Look at the Dockerfile for this project. It starts off with <code>registry.access.redhat.com/rhel7</code> image. It copies the source code which is a simple init.sh file and exposes port 8080. Look at the init.sh that just displays the current datetime. There is also a PHP version of the same project available in the php folder if you like to use that. The php version does exactly the same it has a time.php file that displays the time.</p>
</div>
<div class="paragraph">
<p>When OpenShift finds a Dockerfile in the source, it uses this Dockerfile as the basis to create a docker image for your application. This strategy is called <strong>Docker Build strategy on OpenShift</strong>. We&#x2019;ll see more about it when we look at the build configuration a couple of steps down the line. Once OpenShift builds the application&#x2019;s docker image, it stores that in a local docker registry. Later it uses this image to deploy an application that runs in a pod.</p>
</div>
<div class="paragraph">
<p>Now let&#x2019;s create an application using this approach. We will run <code>oc new-app</code> command by supplying the git uri as the parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ oc new-app https://github.com/jbosschina/time --context-dir=rhel
--&gt; Found Docker image bdcfb1a (2 weeks old) from registry.access.redhat.com <span class="hljs-keyword">for</span> <span class="hljs-string">&quot;registry.access.redhat.com/rhel7&quot;</span>

    Red Hat Enterprise Linux 7
    --------------------------
    Tags: base rhel7

    * An image stream will be created as <span class="hljs-string">&quot;rhel7:latest&quot;</span> that will track the <span class="hljs-built_in">source</span> image
    * A Docker build using <span class="hljs-built_in">source</span> code from https://github.com/jbosschina/time will be created
      * The resulting image will be pushed to image stream <span class="hljs-string">&quot;time:latest&quot;</span>
      * Every time <span class="hljs-string">&quot;rhel7:latest&quot;</span> changes a new build will be triggered
    * This image will be deployed <span class="hljs-keyword">in</span> deployment config <span class="hljs-string">&quot;time&quot;</span>
    * Port 8080 will be load balanced by service <span class="hljs-string">&quot;time&quot;</span>
      * Other containers can access this service through the hostname <span class="hljs-string">&quot;time&quot;</span>
    * WARNING: Image <span class="hljs-string">&quot;registry.access.redhat.com/rhel7&quot;</span> runs as the <span class="hljs-string">&apos;root&apos;</span> user <span class="hljs-built_in">which</span> may not be permitted by your cluster administrator

--&gt; Creating resources ...
    imagestream <span class="hljs-string">&quot;rhel7&quot;</span> created
    imagestream <span class="hljs-string">&quot;time&quot;</span> created
    buildconfig <span class="hljs-string">&quot;time&quot;</span> created
    deploymentconfig <span class="hljs-string">&quot;time&quot;</span> created
    service <span class="hljs-string">&quot;time&quot;</span> created
--&gt; Success
    Build scheduled, use <span class="hljs-string">&apos;oc logs -f bc/time&apos;</span> to track its progress.
    Run <span class="hljs-string">&apos;oc status&apos;</span> to view your app.</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#x2019;ll notice that OpenShift created a few things at this point. You will find a buildconfig, deploymentconfig, service and imagestreams in the above list. The application is not running yet. It needs to be built and deployed. Within a minute or so, you will see that OpenShift starts the build.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_build">Build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the meanwhile lets have a look at the buildconfig by running the command shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">$ oc get buildconfig time -o json
{
    <span class="hljs-string">&quot;apiVersion&quot;</span>: <span class="hljs-string">&quot;v1&quot;</span>,
    <span class="hljs-string">&quot;kind&quot;</span>: <span class="hljs-string">&quot;BuildConfig&quot;</span>,
    <span class="hljs-string">&quot;metadata&quot;</span>: {
        <span class="hljs-string">&quot;annotations&quot;</span>: {
            <span class="hljs-string">&quot;openshift.io/generated-by&quot;</span>: <span class="hljs-string">&quot;OpenShiftNewApp&quot;</span>
        },
        <span class="hljs-string">&quot;creationTimestamp&quot;</span>: <span class="hljs-string">&quot;2017-07-09T13:16:22Z&quot;</span>,
        <span class="hljs-string">&quot;labels&quot;</span>: {
            <span class="hljs-string">&quot;app&quot;</span>: <span class="hljs-string">&quot;time&quot;</span>
        },
        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;time&quot;</span>,
        <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;ocp-test&quot;</span>,
        <span class="hljs-string">&quot;resourceVersion&quot;</span>: <span class="hljs-string">&quot;4617226&quot;</span>,
        <span class="hljs-string">&quot;selfLink&quot;</span>: <span class="hljs-string">&quot;/oapi/v1/namespaces/ocp-test/buildconfigs/time&quot;</span>,
        <span class="hljs-string">&quot;uid&quot;</span>: <span class="hljs-string">&quot;cdd4215f-64a8-11e7-bbc1-0682973451aa&quot;</span>
    },
    <span class="hljs-string">&quot;spec&quot;</span>: {
        <span class="hljs-string">&quot;nodeSelector&quot;</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-string">&quot;output&quot;</span>: {
            <span class="hljs-string">&quot;to&quot;</span>: {
                <span class="hljs-string">&quot;kind&quot;</span>: <span class="hljs-string">&quot;ImageStreamTag&quot;</span>,
                <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;time:latest&quot;</span>
            }
        },
        <span class="hljs-string">&quot;postCommit&quot;</span>: {},
        <span class="hljs-string">&quot;resources&quot;</span>: {},
        <span class="hljs-string">&quot;runPolicy&quot;</span>: <span class="hljs-string">&quot;Serial&quot;</span>,
        <span class="hljs-string">&quot;source&quot;</span>: {
            <span class="hljs-string">&quot;contextDir&quot;</span>: <span class="hljs-string">&quot;rhel&quot;</span>,
            <span class="hljs-string">&quot;git&quot;</span>: {
                <span class="hljs-string">&quot;uri&quot;</span>: <span class="hljs-string">&quot;https://github.com/jbosschina/time&quot;</span>
            },
            <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;Git&quot;</span>
        },
        <span class="hljs-string">&quot;strategy&quot;</span>: {
            <span class="hljs-string">&quot;dockerStrategy&quot;</span>: {
                <span class="hljs-string">&quot;from&quot;</span>: {
                    <span class="hljs-string">&quot;kind&quot;</span>: <span class="hljs-string">&quot;ImageStreamTag&quot;</span>,
                    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;rhel7:latest&quot;</span>
                }
            },
            <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;Docker&quot;</span>
        },
        <span class="hljs-string">&quot;triggers&quot;</span>: [
            {
                <span class="hljs-string">&quot;github&quot;</span>: {
                    <span class="hljs-string">&quot;secret&quot;</span>: <span class="hljs-string">&quot;hhoRslLTEI4XqXUEKzXa&quot;</span>
                },
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;GitHub&quot;</span>
            },
            {
                <span class="hljs-string">&quot;generic&quot;</span>: {
                    <span class="hljs-string">&quot;secret&quot;</span>: <span class="hljs-string">&quot;zFoI6AgPoYzqsdzIjLRY&quot;</span>
                },
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;Generic&quot;</span>
            },
            {
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;ConfigChange&quot;</span>
            },
            {
                <span class="hljs-string">&quot;imageChange&quot;</span>: {
                    <span class="hljs-string">&quot;lastTriggeredImageID&quot;</span>: <span class="hljs-string">&quot;registry.access.redhat.com/rhel7@sha256:582cb940a6e730dbdffee7cc5e1983522fdeeb3c40bea7373b255a209124cc02&quot;</span>
                },
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;ImageChange&quot;</span>
            }
        ]
    },
    <span class="hljs-string">&quot;status&quot;</span>: {
        <span class="hljs-string">&quot;lastVersion&quot;</span>: <span class="hljs-number">1</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Build starts in a minute or so. You can view the list of builds using <code>oc get builds</code> command. You can also start the build using oc start-build time where <code>time</code> is the name we noticed in the buildconfig.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ oc get builds
NAME      TYPE      FROM          STATUS     STARTED         DURATION
time-1    Docker    Git@39a16e6   Complete   6 minutes ago   27s</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the name of the build that is running i.e. time-1. We will use that name to look at the build logs. Run the command as shown below to look at the build logs. This will run for a few mins. At the end you will notice that the docker image is successfully created and it will start pushing this to OpenShift&#x2019;s internal docker registry.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ oc logs build/time-1
Cloning <span class="hljs-string">&quot;https://github.com/jbosschina/time&quot;</span> ...
	Commit:	39a16e6b59ad96b0a15714e54d6eaebbaa1fb164 (Update init.sh)
	Author:	VeerMuchandi &lt;veer.muchandi@gmail.com&gt;
	Date:	Wed Sep 14 20:45:02 2016 -0400
Step 1 : FROM registry.access.redhat.com/rhel7@sha256:582cb940a6e730dbdffee7cc5e1983522fdeeb3c40bea7373b255a209124cc02
 ---&gt; 93bb76ddeb7a
Step 2 : MAINTAINER Veer Muchandi veer@redhat.com
 ---&gt; Using cache
 ---&gt; 2dc7bfa96e21
Step 3 : ADD ./init.sh ./
 ---&gt; Using cache
 ---&gt; d8ade3d469e4
Step 4 : RUN yum install nmap-ncat --disablerepo=* --enablerepo=rhel-7-server-rpms -y &amp;&amp; yum clean all -y
 ---&gt; Using cache
 ---&gt; 8086a11d8fe1
Step 5 : RUN chown 1001:1001 init.sh &amp;&amp; chmod o+w init.sh
 ---&gt; Using cache
 ---&gt; 30a080a82f28
Step 6 : USER 1001
 ---&gt; Using cache
 ---&gt; 0c2fd2cf75b5
Step 7 : EXPOSE 8080
 ---&gt; Using cache
 ---&gt; 69fa2a904898
Step 8 : CMD ./init.sh
 ---&gt; Using cache
 ---&gt; 0c157fd9c41f
Step 9 : ENV <span class="hljs-string">&quot;OPENSHIFT_BUILD_NAME&quot;</span> <span class="hljs-string">&quot;time-1&quot;</span> <span class="hljs-string">&quot;OPENSHIFT_BUILD_NAMESPACE&quot;</span> <span class="hljs-string">&quot;ocp-test&quot;</span> <span class="hljs-string">&quot;OPENSHIFT_BUILD_SOURCE&quot;</span> <span class="hljs-string">&quot;https://github.com/jbosschina/time&quot;</span> <span class="hljs-string">&quot;OPENSHIFT_BUILD_COMMIT&quot;</span> <span class="hljs-string">&quot;39a16e6b59ad96b0a15714e54d6eaebbaa1fb164&quot;</span>
 ---&gt; Running <span class="hljs-keyword">in</span> 8348cc695f40
 ---&gt; cfdc5623eb2d
Removing intermediate container 8348cc695f40
Step 10 : LABEL <span class="hljs-string">&quot;io.openshift.build.commit.author&quot;</span> <span class="hljs-string">&quot;VeerMuchandi \u003cveer.muchandi@gmail.com\u003e&quot;</span> <span class="hljs-string">&quot;io.openshift.build.commit.date&quot;</span> <span class="hljs-string">&quot;Wed Sep 14 20:45:02 2016 -0400&quot;</span> <span class="hljs-string">&quot;io.openshift.build.commit.id&quot;</span> <span class="hljs-string">&quot;39a16e6b59ad96b0a15714e54d6eaebbaa1fb164&quot;</span> <span class="hljs-string">&quot;io.openshift.build.commit.ref&quot;</span> <span class="hljs-string">&quot;master&quot;</span> <span class="hljs-string">&quot;io.openshift.build.commit.message&quot;</span> <span class="hljs-string">&quot;Update init.sh&quot;</span> <span class="hljs-string">&quot;io.openshift.build.source-location&quot;</span> <span class="hljs-string">&quot;https://github.com/jbosschina/time&quot;</span> <span class="hljs-string">&quot;io.openshift.build.source-context-dir&quot;</span> <span class="hljs-string">&quot;rhel&quot;</span>
 ---&gt; Running <span class="hljs-keyword">in</span> 071fe3f76a40
 ---&gt; c14de1c75ecf
Removing intermediate container 071fe3f76a40
Successfully built c14de1c75ecf
Pushing image 172.30.160.227:5000/ocp-test/time:latest ...
Pushed 0/5 layers, 2% complete
Pushed 1/5 layers, 28% complete
Pushed 2/5 layers, 46% complete
Pushed 3/5 layers, 64% complete
Pushed 4/5 layers, 81% complete
Pushed 5/5 layers, 100% complete
Push successful</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above log note how the image is pushed to the local docker registry. The registry is running at 172.30.160.227 at port 5000.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deployment">Deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once the image is pushed to the docker registry, OpenShift will trigger a deploy process. Let us also quickly look at the deployment configuration by running the following command. Note dc represents deploymentconfig.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">$ oc get deploymentconfig time -o json
{
    <span class="hljs-string">&quot;apiVersion&quot;</span>: <span class="hljs-string">&quot;v1&quot;</span>,
    <span class="hljs-string">&quot;kind&quot;</span>: <span class="hljs-string">&quot;DeploymentConfig&quot;</span>,
    <span class="hljs-string">&quot;metadata&quot;</span>: {
        <span class="hljs-string">&quot;annotations&quot;</span>: {
            <span class="hljs-string">&quot;openshift.io/generated-by&quot;</span>: <span class="hljs-string">&quot;OpenShiftNewApp&quot;</span>
        },
        <span class="hljs-string">&quot;creationTimestamp&quot;</span>: <span class="hljs-string">&quot;2017-07-09T13:16:23Z&quot;</span>,
        <span class="hljs-string">&quot;generation&quot;</span>: <span class="hljs-number">2</span>,
        <span class="hljs-string">&quot;labels&quot;</span>: {
            <span class="hljs-string">&quot;app&quot;</span>: <span class="hljs-string">&quot;time&quot;</span>
        },
        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;time&quot;</span>,
        <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;ocp-test&quot;</span>,
        <span class="hljs-string">&quot;resourceVersion&quot;</span>: <span class="hljs-string">&quot;4617319&quot;</span>,
        <span class="hljs-string">&quot;selfLink&quot;</span>: <span class="hljs-string">&quot;/oapi/v1/namespaces/ocp-test/deploymentconfigs/time&quot;</span>,
        <span class="hljs-string">&quot;uid&quot;</span>: <span class="hljs-string">&quot;cdf17ba6-64a8-11e7-bbc1-0682973451aa&quot;</span>
    },
    <span class="hljs-string">&quot;spec&quot;</span>: {
        <span class="hljs-string">&quot;replicas&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;selector&quot;</span>: {
            <span class="hljs-string">&quot;app&quot;</span>: <span class="hljs-string">&quot;time&quot;</span>,
            <span class="hljs-string">&quot;deploymentconfig&quot;</span>: <span class="hljs-string">&quot;time&quot;</span>
        },
        <span class="hljs-string">&quot;strategy&quot;</span>: {
            <span class="hljs-string">&quot;activeDeadlineSeconds&quot;</span>: <span class="hljs-number">21600</span>,
            <span class="hljs-string">&quot;resources&quot;</span>: {},
            <span class="hljs-string">&quot;rollingParams&quot;</span>: {
                <span class="hljs-string">&quot;intervalSeconds&quot;</span>: <span class="hljs-number">1</span>,
                <span class="hljs-string">&quot;maxSurge&quot;</span>: <span class="hljs-string">&quot;25%&quot;</span>,
                <span class="hljs-string">&quot;maxUnavailable&quot;</span>: <span class="hljs-string">&quot;25%&quot;</span>,
                <span class="hljs-string">&quot;timeoutSeconds&quot;</span>: <span class="hljs-number">600</span>,
                <span class="hljs-string">&quot;updatePeriodSeconds&quot;</span>: <span class="hljs-number">1</span>
            },
            <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;Rolling&quot;</span>
        },
        <span class="hljs-string">&quot;template&quot;</span>: {
            <span class="hljs-string">&quot;metadata&quot;</span>: {
                <span class="hljs-string">&quot;annotations&quot;</span>: {
                    <span class="hljs-string">&quot;openshift.io/generated-by&quot;</span>: <span class="hljs-string">&quot;OpenShiftNewApp&quot;</span>
                },
                <span class="hljs-string">&quot;creationTimestamp&quot;</span>: <span class="hljs-literal">null</span>,
                <span class="hljs-string">&quot;labels&quot;</span>: {
                    <span class="hljs-string">&quot;app&quot;</span>: <span class="hljs-string">&quot;time&quot;</span>,
                    <span class="hljs-string">&quot;deploymentconfig&quot;</span>: <span class="hljs-string">&quot;time&quot;</span>
                }
            },
            <span class="hljs-string">&quot;spec&quot;</span>: {
                <span class="hljs-string">&quot;containers&quot;</span>: [
                    {
                        <span class="hljs-string">&quot;image&quot;</span>: <span class="hljs-string">&quot;172.30.160.227:5000/ocp-test/time@sha256:15406997a5964509c34525194c416996f9704d237f860c88c5330993c96a1d12&quot;</span>,
                        <span class="hljs-string">&quot;imagePullPolicy&quot;</span>: <span class="hljs-string">&quot;Always&quot;</span>,
                        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;time&quot;</span>,
                        <span class="hljs-string">&quot;ports&quot;</span>: [
                            {
                                <span class="hljs-string">&quot;containerPort&quot;</span>: <span class="hljs-number">8080</span>,
                                <span class="hljs-string">&quot;protocol&quot;</span>: <span class="hljs-string">&quot;TCP&quot;</span>
                            }
                        ],
                        <span class="hljs-string">&quot;resources&quot;</span>: {},
                        <span class="hljs-string">&quot;terminationMessagePath&quot;</span>: <span class="hljs-string">&quot;/dev/termination-log&quot;</span>
                    }
                ],
                <span class="hljs-string">&quot;dnsPolicy&quot;</span>: <span class="hljs-string">&quot;ClusterFirst&quot;</span>,
                <span class="hljs-string">&quot;restartPolicy&quot;</span>: <span class="hljs-string">&quot;Always&quot;</span>,
                <span class="hljs-string">&quot;securityContext&quot;</span>: {},
                <span class="hljs-string">&quot;terminationGracePeriodSeconds&quot;</span>: <span class="hljs-number">30</span>
            }
        },
        <span class="hljs-string">&quot;test&quot;</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-string">&quot;triggers&quot;</span>: [
            {
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;ConfigChange&quot;</span>
            },
            {
                <span class="hljs-string">&quot;imageChangeParams&quot;</span>: {
                    <span class="hljs-string">&quot;automatic&quot;</span>: <span class="hljs-literal">true</span>,
                    <span class="hljs-string">&quot;containerNames&quot;</span>: [
                        <span class="hljs-string">&quot;time&quot;</span>
                    ],
                    <span class="hljs-string">&quot;from&quot;</span>: {
                        <span class="hljs-string">&quot;kind&quot;</span>: <span class="hljs-string">&quot;ImageStreamTag&quot;</span>,
                        <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;time:latest&quot;</span>,
                        <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;ocp-test&quot;</span>
                    },
                    <span class="hljs-string">&quot;lastTriggeredImage&quot;</span>: <span class="hljs-string">&quot;172.30.160.227:5000/ocp-test/time@sha256:15406997a5964509c34525194c416996f9704d237f860c88c5330993c96a1d12&quot;</span>
                },
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;ImageChange&quot;</span>
            }
        ]
    },
    <span class="hljs-string">&quot;status&quot;</span>: {
        <span class="hljs-string">&quot;availableReplicas&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;conditions&quot;</span>: [
            {
                <span class="hljs-string">&quot;lastTransitionTime&quot;</span>: <span class="hljs-string">&quot;2017-07-09T13:16:59Z&quot;</span>,
                <span class="hljs-string">&quot;lastUpdateTime&quot;</span>: <span class="hljs-string">&quot;2017-07-09T13:16:59Z&quot;</span>,
                <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;Deployment config has minimum availability.&quot;</span>,
                <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;True&quot;</span>,
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;Available&quot;</span>
            },
            {
                <span class="hljs-string">&quot;lastTransitionTime&quot;</span>: <span class="hljs-string">&quot;2017-07-09T13:16:55Z&quot;</span>,
                <span class="hljs-string">&quot;lastUpdateTime&quot;</span>: <span class="hljs-string">&quot;2017-07-09T13:17:00Z&quot;</span>,
                <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;replication controller \&quot;time-1\&quot; successfully rolled out&quot;</span>,
                <span class="hljs-string">&quot;reason&quot;</span>: <span class="hljs-string">&quot;NewReplicationControllerAvailable&quot;</span>,
                <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;True&quot;</span>,
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;Progressing&quot;</span>
            }
        ],
        <span class="hljs-string">&quot;details&quot;</span>: {
            <span class="hljs-string">&quot;causes&quot;</span>: [
                {
                    <span class="hljs-string">&quot;imageTrigger&quot;</span>: {
                        <span class="hljs-string">&quot;from&quot;</span>: {
                            <span class="hljs-string">&quot;kind&quot;</span>: <span class="hljs-string">&quot;ImageStreamTag&quot;</span>,
                            <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;time:latest&quot;</span>,
                            <span class="hljs-string">&quot;namespace&quot;</span>: <span class="hljs-string">&quot;ocp-test&quot;</span>
                        }
                    },
                    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;ImageChange&quot;</span>
                }
            ],
            <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;image change&quot;</span>
        },
        <span class="hljs-string">&quot;latestVersion&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;observedGeneration&quot;</span>: <span class="hljs-number">2</span>,
        <span class="hljs-string">&quot;readyReplicas&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;replicas&quot;</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">&quot;unavailableReplicas&quot;</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">&quot;updatedReplicas&quot;</span>: <span class="hljs-number">1</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note where the image is picked from. It shows that the deployment picks the image from the local registry (same ip address and port as in buildconfig) and the image tag is same as what we built earlier. This means the deployment step deploys the application image what was built earlier during the build step.</p>
</div>
<div class="paragraph">
<p>If you get the list of pods, you&#x2019;ll notice that the application gets deployed quickly and starts running in its own pod.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ oc get pods
NAME           READY     STATUS      RESTARTS   AGE
time-1-build   0/1       Completed   0          12m
time-1-sj1wz   1/1       Running     0          11m</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_route">Adding route</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This step is very much the same as what we did in the previous exercise. We will check the service and add a route to expose that service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ oc get service
NAME      CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE
time      172.30.85.105   &lt;none&gt;        8080/TCP   14m</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we expose the service as a route.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ oc expose service time
route <span class="hljs-string">&quot;time&quot;</span> exposed</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then we check the route exposed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ oc get routes
NAME      HOST/PORT                                      PATH      SERVICES   PORT       TERMINATION   WILDCARD
time      time-ocp-test.apps.example.com             time       8080-tcp                 None</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_the_application">Run the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now run the application by using the route you provided in the previous step. You can use either curl or your browser. The application displays time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl time-ocp-test.apps.example.com
Sun Jul  9 13:16:58 UTC 2017
Host: time-1-sj1wz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations!! In this exercise you have learnt how to create, build and deploy an application using OpenShift&#x2019;s <strong>Docker Build strategy</strong>.</p>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="001.html" class="navigation navigation-prev " aria-label="Previous page: Create an App from a Docker image">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="003.html" class="navigation navigation-next " aria-label="Next page: Using Web Console">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Create an App using Docker build","level":"1.4.5.2","depth":3,"next":{"title":"Using Web Console","level":"1.4.5.3","depth":3,"path":"openshift/100/003.adoc","ref":"openshift/100/003.adoc","articles":[]},"previous":{"title":"Create an App from a Docker image","level":"1.4.5.1","depth":3,"path":"openshift/100/001.adoc","ref":"openshift/100/001.adoc","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{"GUID":"na39","OCP_USER_ID":"ksoong-redhat.com","copyrightYear":"2018","copyrightHolder":"Kylin Soong"},"plugins":["collapsible-menu","donate","-sharing","sharing-plus","splitter","back-to-top-button","edit-link"],"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy Kylin Soong 2018","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"collapsible-menu":{},"splitter":{},"search":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"donate":{"alipay":"http://ksoong.org/docs/content/images/alipay.png","alipayText":"支付宝捐赠","button":"赞赏","title":"","wechat":"http://ksoong.org/docs/content/images/wechat.png","wechatText":"微信捐赠"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"back-to-top-button":{},"sharing":{"weibo":true,"linkedin":true,"google":true,"facebook":true,"all":["facebook","google","linkedin","weibo"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/kylinsoong/docs/blob/gh-pages"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css"}},"file":{"path":"openshift/100/002.adoc","mtime":"2018-06-01T01:29:20.138Z","type":"asciidoc"},"gitbook":{"version":"3.2.3","time":"2018-08-09T15:00:12.811Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

